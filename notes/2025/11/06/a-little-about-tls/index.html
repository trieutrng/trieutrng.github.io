<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://trieutrng.github.io/images/favicon.png" />
<title>A little about TLS | Trieu Truong</title>
<meta name="title" content="A little about TLS" />
<meta name="description" content="TLS (Transport Layer Security) is the additional layer laid immediately above the socket and below the application layer in TCP/UDP. It&rsquo;s laid there to encrypt and decrypt messages passed through to make sure no one in the mdidle could see the actual message.
We know that if server and client want to hide and read the messages, they should have the same key to encrypt and decrypt (symmetric encryption). But how both ends can securely share the keys through network which is considerably insecure? Let&rsquo;s look at certain steps both ends should go through to make it happened." />
<meta name="author" content="" />
<meta name="keywords" content="networking,go," />






  
  <meta property="og:url" content="https://trieutrng.github.io/notes/2025/11/06/a-little-about-tls/">
  <meta property="og:site_name" content="Trieu Truong">
  <meta property="og:title" content="A little about TLS">
  <meta property="og:description" content="TLS (Transport Layer Security) is the additional layer laid immediately above the socket and below the application layer in TCP/UDP. It’s laid there to encrypt and decrypt messages passed through to make sure no one in the mdidle could see the actual message.
We know that if server and client want to hide and read the messages, they should have the same key to encrypt and decrypt (symmetric encryption). But how both ends can securely share the keys through network which is considerably insecure? Let’s look at certain steps both ends should go through to make it happened.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2025-11-06T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Networking">
    <meta property="article:tag" content="Go">
    <meta property="og:image" content="https://trieutrng.github.io/images/share.webp">
        <meta property="fb:admins" content="0000000000">


  
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://trieutrng.github.io/images/share.webp">
  <meta name="twitter:title" content="A little about TLS">
  <meta name="twitter:description" content="TLS (Transport Layer Security) is the additional layer laid immediately above the socket and below the application layer in TCP/UDP. It’s laid there to encrypt and decrypt messages passed through to make sure no one in the mdidle could see the actual message.
We know that if server and client want to hide and read the messages, they should have the same key to encrypt and decrypt (symmetric encryption). But how both ends can securely share the keys through network which is considerably insecure? Let’s look at certain steps both ends should go through to make it happened.">
      <meta name="twitter:site" content="@example">


  
  
  <meta itemprop="name" content="A little about TLS">
  <meta itemprop="description" content="TLS (Transport Layer Security) is the additional layer laid immediately above the socket and below the application layer in TCP/UDP. It’s laid there to encrypt and decrypt messages passed through to make sure no one in the mdidle could see the actual message.
We know that if server and client want to hide and read the messages, they should have the same key to encrypt and decrypt (symmetric encryption). But how both ends can securely share the keys through network which is considerably insecure? Let’s look at certain steps both ends should go through to make it happened.">
  <meta itemprop="datePublished" content="2025-11-06T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-11-06T00:00:00+00:00">
  <meta itemprop="wordCount" content="480">
  <meta itemprop="image" content="https://trieutrng.github.io/images/share.webp">
  <meta itemprop="keywords" content="Networking,Go">

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/original.min.css" rel="stylesheet">

  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1></h1></a>
<nav>
  <a href="/">Home</a>

  <a href="/notes/">Notes</a>

  <a href="/tags/">Tags</a>

<a href='https://trieutrng.github.io/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>A little about TLS</h1>
<p class="byline">
  <time datetime='2025-11-06' pubdate>
    2025-11-06
  </time>
  
</p>

<content>
  <p>TLS (Transport Layer Security) is the additional layer laid immediately above the socket and below the application layer in TCP/UDP. It&rsquo;s laid there to encrypt and decrypt messages passed through to make sure no one in the mdidle could see the actual message.</p>
<p>We know that if server and client want to hide and read the messages, they should have the same key to encrypt and decrypt (symmetric encryption). But how both ends can securely share the keys through network which is considerably insecure? Let&rsquo;s look at certain steps both ends should go through to make it happened.</p>
<h2 id="the-actual-tls-flow">The actual TLS flow</h2>
<p>Overall, the TLS protocol help both client and server to securly shared a set of secrets to encrypt/decrypt the communication. It uses a set of cryptograhpy algorithms over the network in certain steps to share essential information in order to have the keys set generated securely at both ends.</p>
<p><img src="tls_handshake.png" alt="TLS Handshake"></p>
<p>Generally, the client and server wouldn&rsquo;t share the shared session key through the network, it is calculated by using key exchange algorithms (ECDH, .etc) on key pairs (public/private key) generated by client and server to generate base secret and then using key derivation algorithms (HKDF, .etc) to derive more keys. The decision behind generating many keys is for preventing keys leak.</p>
<p>To prove that the server who client is talking to is authenticated, the certificate is provided by the server. This certificate is signed by an trusted authority.</p>
<p>One interesting point is the calculated keys are also based on the hash which is generated by hashing all the decrypted messages so far.</p>
<p>The application keys are calculated the same way with handshake keys. These keys are used for encrypting and decrypting message onward.</p>
<h2 id="more-on-this">More on this</h2>
<p>If the responses to client are large, it will be splited into chunks. As experiment, those chunks are about 1400 bytes. That means, the implmentation on receiver side should concatenate the chunks to have complete message.</p>
<p>Client and server also keep track of how many messages have been encrypted and decryped so far. This value is used in the encrypting/decrypting process. As far as I understand, this is for preventing producing the same encrypted value if one of the ends send the same message again.</p>
<p>There is a definition about the session ticket, I didn&rsquo;t deep dive into this concept. Generally, after the client and server get done on handshake, the server would send the session tickets to client, client can use those tickets to make another TLS session without having to go through handshake process again. The network overhead would be well reduced.</p>
<h2 id="the-end">The end</h2>
<p>Beside this notes, I have a mini implementation to prove what I understand is correct. It is only for educational purpose since I find that the <strong>RFC#8446</strong> is really hard to completely implement.</p>
<p>Link to implementation: <a href="https://github.com/trieutrng/toy-tls">https://github.com/trieutrng/toy-tls</a></p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://datatracker.ietf.org/doc/html/rfc8446">RFC 8446</a></li>
<li><a href="https://tls13.xargs.org/">The Illustrated TLS 1.3 Connection</a></li>
<li><a href="https://www.manning.com/books/real-world-cryptography">Real-World Cryptography</a></li>
</ul>

</content>
<p>
  
    <a class="blog-tags" href="/tags/networking/">#networking</a>
  
    <a class="blog-tags" href="/tags/go/">#go</a>
  
</p>


  <p>
    <a href='mailto:trieutrng@gmail.com?subject=Reply%20to%20"A%20little%20about%20TLS"'>
      Reply to this post by email ↪
    </a>
  </p>



  </main>
  <footer></footer>

    
</body>



</html>
